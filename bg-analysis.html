<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backgammon Analysis Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .board-container {
            flex: 1;
            min-width: 600px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .controls {
            flex: 1;
            min-width: 300px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .board {
            width: 600px;
            height: 400px;
            background-color: #e6c88c;
            position: relative;
            margin: 0 auto;
        }
        .point {
            position: absolute;
            width: 24px;
            height: 160px;
            background-color: transparent;
        }
        .checker {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 1px solid #333;
        }
        .white {
            background-color: white;
        }
        .black {
            background-color: black;
        }
        .dice {
            display: inline-block;
            width: 40px;
            height: 40px;
            background-color: white;
            border: 1px solid #333;
            border-radius: 5px;
            text-align: center;
            line-height: 40px;
            font-size: 20px;
            margin: 5px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .move-suggestion {
            background-color: #e6f7ff;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #1890ff;
        }
        .analysis-section {
            margin-top: 20px;
        }
        textarea {
            width: 100%;
            height: 100px;
            margin-bottom: 10px;
        }
        .eval-bar {
            height: 20px;
            background: linear-gradient(to right, red, yellow, green);
            margin: 10px 0;
            position: relative;
        }
        .eval-marker {
            position: absolute;
            top: -5px;
            width: 2px;
            height: 30px;
            background-color: black;
        }
    </style>
</head>
<body>
    <h1>Backgammon Analysis Tool</h1>
    
    <div class="container">
        <div class="board-container">
            <h2>Current Board Position</h2>
            <div class="board" id="board">
                <!-- Points will be generated by JavaScript -->
            </div>
            <div class="dice-container">
                <h3>Dice Roll: </h3>
                <div class="dice" id="dice1">0</div>
                <div class="dice" id="dice2">0</div>
            </div>
            <div class="player-turn">
                <h3>Current Player: <span id="current-player">White</span></h3>
            </div>
        </div>
        
        <div class="controls">
            <h2>Game Analysis</h2>
            
            <div class="input-section">
                <h3>Enter Move Sequence</h3>
                <textarea id="move-input" placeholder="Enter moves in standard notation (e.g., 24/18 13/11)"></textarea>
                <button id="analyze-btn">Analyze Position</button>
                <button id="suggest-move-btn">Suggest Best Move</button>
            </div>
            
            <div class="analysis-section">
                <h3>Analysis Results</h3>
                <div class="eval-bar">
                    <div class="eval-marker" id="eval-marker" style="left: 50%;"></div>
                </div>
                <p>Evaluation: <span id="eval-text">0.000 (equal)</span></p>
                
                <div id="move-suggestions">
                    <h4>Suggested Moves</h4>
                    <!-- Suggestions will appear here -->
                </div>
                
                <div id="move-explanation">
                    <h4>Move Explanation</h4>
                    <p>Analysis will appear here explaining why certain moves are better than others.</p>
                </div>
            </div>
            
            <div class="settings">
                <h3>Analysis Settings</h3>
                <label>
                    <input type="checkbox" id="consider-doubles" checked>
                    Consider doubling cube decisions
                </label><br>
                <label>
                    Analysis depth:
                    <select id="analysis-depth">
                        <option value="1">Fast (1-ply)</option>
                        <option value="2" selected>Standard (2-ply)</option>
                        <option value="3">Deep (3-ply)</option>
                        <option value="4">Very Deep (4-ply)</option>
                    </select>
                </label>
            </div>
        </div>
    </div>

    <script>
        // Initialize the board
        document.addEventListener('DOMContentLoaded', function() {
            const board = document.getElementById('board');
            
            // Create points (24 points in backgammon)
            for (let i = 0; i < 24; i++) {
                const point = document.createElement('div');
                point.className = 'point';
                point.id = 'point-' + (i+1);
                
                // Position points alternately on top and bottom
                const isTop = i < 12;
                const row = Math.floor(i / 6);
                const col = i % 6;
                
                const left = 50 + col * 90;
                const top = isTop ? 20 : 220;
                
                point.style.left = left + 'px';
                point.style.top = top + 'px';
                
                // Add triangle shape using CSS
                point.style.clipPath = isTop 
                    ? 'polygon(0% 0%, 100% 0%, 50% 100%)'
                    : 'polygon(0% 100%, 100% 100%, 50% 0%)';
                point.style.backgroundColor = row % 2 === 0 ? '#8b4513' : '#f5deb3';
                
                board.appendChild(point);
            }
            
            // Initialize starting position
            setupInitialPosition();
            
            // Set up event listeners
            document.getElementById('analyze-btn').addEventListener('click', analyzePosition);
            document.getElementById('suggest-move-btn').addEventListener('click', suggestBestMove);
        });
        
        function setupInitialPosition() {
            // Clear all checkers
            const checkers = document.querySelectorAll('.checker');
            checkers.forEach(c => c.remove());
            
            // Standard starting position
            placeCheckers(1, 2, 'black');
            placeCheckers(6, 5, 'white');
            placeCheckers(8, 3, 'white');
            placeCheckers(12, 5, 'black');
            placeCheckers(13, 5, 'white');
            placeCheckers(17, 3, 'black');
            placeCheckers(19, 5, 'black');
            placeCheckers(24, 2, 'white');
        }
        
        function placeCheckers(pointNumber, count, color) {
            const point = document.getElementById('point-' + pointNumber);
            const isTop = pointNumber <= 12;
            
            for (let i = 0; i < count; i++) {
                const checker = document.createElement('div');
                checker.className = 'checker ' + color;
                
                // Position checkers on the point
                const left = parseInt(point.style.left) + 2;
                const top = parseInt(point.style.top) + (isTop ? i * 10 : -i * 10);
                
                checker.style.left = left + 'px';
                checker.style.top = top + 'px';
                
                point.appendChild(checker);
            }
        }
        
        function analyzePosition() {
            const moveInput = document.getElementById('move-input').value;
            
            // In a real implementation, this would connect to a backgammon engine
            // For this demo, we'll simulate analysis
            
            // Simulate some evaluation
            const evalValue = (Math.random() - 0.5) * 0.2;
            updateEvaluation(evalValue);
            
            // Show some sample analysis
            const suggestions = document.getElementById('move-suggestions');
            suggestions.innerHTML = `
                <h4>Suggested Moves</h4>
                <div class="move-suggestion">
                    <strong>1. 13/7 6/5</strong> - Wins 62% of games (best)
                    <p>This move secures your home board while developing builders.</p>
                </div>
                <div class="move-suggestion">
                    <strong>2. 24/18 13/11</strong> - Wins 58% of games
                    <p>Good for splitting back checkers but leaves blots.</p>
                </div>
                <div class="move-suggestion">
                    <strong>3. 8/2 6/5</strong> - Wins 55% of games
                    <p>Safe play but doesn't maximize position potential.</p>
                </div>
            `;
            
            // Update move explanation
            document.getElementById('move-explanation').innerHTML = `
                <h4>Position Analysis</h4>
                <p>The best move (13/7 6/5) balances several strategic considerations:</p>
                <ul>
                    <li>Builds a strong home board position</li>
                    <li>Creates multiple threats for next turn</li>
                    <li>Maintains flexibility in your position</li>
                    <li>Minimizes direct exposure to hits</li>
                </ul>
                <p>Other moves either take unnecessary risks or don't capitalize on your positional advantage.</p>
            `;
        }
        
        function suggestBestMove() {
            // Simulate rolling dice
            const dice1 = Math.floor(Math.random() * 6) + 1;
            const dice2 = Math.floor(Math.random() * 6) + 1;
            
            document.getElementById('dice1').textContent = dice1;
            document.getElementById('dice2').textContent = dice2;
            
            // In a real implementation, this would use a backgammon AI
            // For this demo, we'll provide sample suggestions
            
            const suggestions = document.getElementById('move-suggestions');
            suggestions.innerHTML = `
                <h4>Best Moves for ${dice1}-${dice2}</h4>
                <div class="move-suggestion">
                    <strong>1. ${getSampleMove(dice1, dice2)}</strong> - Best equity (+0.145)
                    <p>This move maximizes your winning chances while minimizing gammon losses.</p>
                </div>
                <div class="move-suggestion">
                    <strong>2. ${getAlternativeMove(dice1, dice2)}</strong> - Slightly worse (+0.112)
                    <p>More conservative play that maintains board control.</p>
                </div>
            `;
            
            // Update evaluation
            const evalValue = 0.1 + (Math.random() * 0.1);
            updateEvaluation(evalValue);
        }
        
        function getSampleMove(d1, d2) {
            const moves = [
                `8/3 6/4`,
                `13/7 6/5`,
                `24/18 13/11`,
                `19/16 13/10`,
                `17/14 13/10`,
                `12/7 8/6`,
                `13/8 6/3`,
                `24/21 13/10`
            ];
            return moves[(d1 + d2) % moves.length];
        }
        
        function getAlternativeMove(d1, d2) {
            const moves = [
                `8/2 6/5`,
                `13/8 6/4`,
                `24/20 13/10`,
                `19/15 13/10`,
                `17/13 12/10`,
                `12/8 8/6`,
                `13/9 6/4`,
                `24/22 13/10`
            ];
            return moves[(d1 + d2) % moves.length];
        }
        
        function updateEvaluation(value) {
            const marker = document.getElementById('eval-marker');
            const evalText = document.getElementById('eval-text');
            
            // Position marker on eval bar (-0.5 to +0.5)
            const position = 50 + (value * 100);
            marker.style.left = Math.max(0, Math.min(100, position)) + '%';
            
            // Format evaluation text
            const absValue = Math.abs(value);
            let description;
            
            if (absValue < 0.02) {
                description = "equal";
            } else if (absValue < 0.1) {
                description = "slight advantage";
            } else if (absValue < 0.2) {
                description = "moderate advantage";
            } else if (absValue < 0.3) {
                description = "significant advantage";
            } else {
                description = "decisive advantage";
            }
            
            if (value < 0) {
                description = "Black has " + description;
            } else if (value > 0) {
                description = "White has " + description;
            }
            
            evalText.textContent = value.toFixed(3) + " (" + description + ")";
        }
    </script>
</body>
</html>